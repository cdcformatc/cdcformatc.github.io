pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
 debug=true

 -- set beige transparent
 palt(15, true)
 -- set black not transparent
 palt(0, false)
 
 -- set game state
 game_over=false
 
 -- make cats
 cat1=make_cat(1)
 cat2=make_cat(2)
end

function _update()
 if (not game_over) then
  move_cat(cat1)
  move_cat(cat2)
 else
  if(btnp(5)) _init()
 end
end

function debug_cat(cat)
 c_w=4
 c_h=6
 x=cat.n*8*c_w
 y=0
 
 print(cat.n,x,y)
 y+=c_h
 print(cat.x,x,y)
 y+=c_h
 print(cat.y,x,y)
 y+=c_h
 print(cat.dx,x,y)
 y+=c_h
 print(cat.dy,x,y)

end

function _draw()
 cls(5)
 draw_cat(cat1)
 draw_cat(cat2)
 if debug then
  debug_cat(cat1)
  debug_cat(cat2)
 end
 
 if (game_over) then
  print("game over!",44,44,7)
  print("press ❎ to play again!",18,72,7)
 else
  
 end
end

-->8
dy_gravity=0.2

dy_jump=-14*dy_gravity
dy_down=dy_gravity

dx_move=2
ddx_slow=.75

function make_sprites(base)
 s={}
 s.stand=base
 s.jump=base
 s.fall=base
 s.sit=base+1
 s.loaf=base+2
 s.dead=base+3
 return s
end

function make_cat(n)
 c={}
 c.n=n-1
 c.x=24
 c.y=60
 c.dy=0
 c.dx=0
 c.s=make_sprites(c.n*16)
 if (c.n==1) then
  c.x+=12
  c.flip_h=true
 end
 return c
end

function check_btns(cat)
 local n=cat.n
 local d={}
 d.x=0
 d.y=0
 
 if (btnp(❎,n)) sfx(2+n)
 if (btn(⬅️,n)) then
  d.x-=dx_move
 end
 if (btn(➡️,n)) then
  d.x+=dx_move
 end
 if (btnp(⬆️,n)) then
  sfx(0)
  d.y+=dy_jump
 end
 if (btnp(⬇️,n)) then
  d.y+=dy_down
 end
 if d.x>10 then
  d.x=10
 end
 if d.x<-10 then
  d.x=-10
 end
 
 return d
end

function move_cat(cat)
 cat.dy+=dy_gravity
 d=check_btns(cat)
 
 cat.dy+=d.y
 cat.dx+=d.x
 
 cat.dx*=ddx_slow
 if (abs(cat.dx)<.1) cat.dx=0
 if (cat.dy>100) cat.dy=100
 if (cat.dy<-100) cat.dy=-100

 cat.y+=cat.dy
 cat.x+=cat.dx
 
 cat.falling=true
 if (cat.y > 120) then
  cat.dy=0
  cat.y=120
  cat.falling=false
 end
 
 if (cat.x < 0) then
  cat.dx=0
  cat.x=0
 end
 
 if (cat.x > 120) then
  cat.dx=0
  cat.x=120
 end
end

function do_draw(sprt,cat)
 spr(sprt,cat.x,cat.y,1,1,cat.flip_h)
end

function draw_cat(cat)
 if (cat.dx<0) cat.flip_h=true
 if (cat.dx>0) cat.flip_h=false

 if (game_over) then
  do_draw(cat.s.dead,cat)
 elseif (cat.dy<0) then
  do_draw(cat.s.fall,cat)
 elseif (cat.dy>0) then
 	do_draw(cat.s.jump,cat)
 elseif (cat.dy==0 and cat.dx==0) then
  if (cat.falling) then
   do_draw(cat.s.fall,cat)
  else
   do_draw(cat.s.sit,cat)
  end
 else
  do_draw(cat.s.stand,cat)
 end
end
__gfx__
f0ff0ff0ffff0ff0fff0fff000fff00f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0fff0000f0ff0000fff00f000ffff0ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0fff0a0a0fff0a0af0f00000000000ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0fff00000fff0000f0f0a0a0000000ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000ff0f0000ff0ff000000fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000fff00000ff0fff00ff0fff0a0a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0ffff0fff000f0ff000000ff0fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00fff00ff000f00f00000000f0ff0ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f4ff9ff4ffff9ff4fff9fff444fff44f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4fff4444f4ff4444fff99f444ffff4ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4fff4a4a4fff4a4af4f44444994449ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4fff44444fff4444f4f4a4a4944944ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
944944ff4f4944ff4ff444444fff4444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
994449fff44449ff4fff44ff4fff4a4a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4ffff4fff944f4ff944494ff4fff4444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44fff44ff994f44f99444444f4ff9ff4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
66655555555555555555555555555555665555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
65655555555555555555555555555555565555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
65655555555555555555555555555555565555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
65655555555555555555555555555555565555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
66655555555555555555555555555555666555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
66656565555555555555555555555555666565555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55656565555555555555555555555555556565555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
66656665555555555555555555555555566566655555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
65555565555555555555555555555555556565655555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
66655565555555555555555555555555666566655555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
66556665666555555555555555555555665566656665555555555555555555555555555555555555555555555555555555555555555555555555555555555555
56555565656555555555555555555555565555656565555555555555555555555555555555555555555555555555555555555555555555555555555555555555
56556665656555555555555555555555565566656565555555555555555555555555555555555555555555555555555555555555555555555555555555555555
56556555656555555555555555555555565565556565555555555555555555555555555555555555555555555555555555555555555555555555555555555555
66656665666555555555555555555555666566656665555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
66655555555555555555555555555555666555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
65655555555555555555555555555555656555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
65655555555555555555555555555555656555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
65655555555555555555555555555555656555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
66655555555555555555555555555555666555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
66655555555555555555555555555555666555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
65655555555555555555555555555555656555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
65655555555555555555555555555555656555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
65655555555555555555555555555555656555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
66655555555555555555555555555555666555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555550550555545595555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555550550000555544445545555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555505550a0a5555a4a45554555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555505550000555544445554555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555505000055555555449454555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555550000055555555944445555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555550005055555555454495555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555550005005555554454995555555555555555555555555555555555555555555555555555555555555555555555555555555555555

__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000400000c0500e0501110020100231002c1002e1003010023200232002220022200202001e2001d2001d2002cd002cd002bd002bd002bd002bd002bd001ab002bd002ad002bd002cd002cd002cd002cd0000000
00100000290501d0001f0500000019050000000804008030080300803008020080200802008010080100801000000000000000000000000000000000000000000000000000000000000000000000000000000000
0008000027150291502b1500000000000000000000000000000000000000000000000000000000000000000033100000000000000000000000000000000000000000000000000000000000000000000000000000
0008000015150181501c15020100231002c1002e1003010023200232002220022200202001e2001d2001d2002cd002cd002bd002bd002bd002bd002bd001ab002bd002ad002bd002cd002cd002cd002cd0000000
0008000015100181001c10020100231002c1002e1003010023200232002220022200202001e2001d2001d2002cd002cd002bd002bd002bd002bd002bd001ab002bd002ad002bd002cd002cd002cd002cd0000000
